## Тестовое задание 



>У нас мультизональный кластер (три зоны), в котором пять нод	

Получается наше веб приложение разнесено по трем разным цодам, что конечно повышает повышает отказоустойчивость, но так как нод 5, а зоны 3 получается, что одна нода останется одинока на своей зоне, что не очень то хорошо.


>Приложение требует около 5-10 секунд для инициализации
  
  *initialDelaySeconds сообщает kubelet'у, что он должен ждать 5 секунд перед проведением первой пробы. Для проведения пробы kubelet отправляет запрос HTTP GET на сервер, который запущен в контейнере и слушает порт 80. Если обработчик пути /healthz на сервере возвращает код успеха, kubelet рассматривает контейнер как живой и здоровый. Если обработчик возвращает код ошибки, kubelet убивает и перезапускает контейнер.*


>По результатам нагрузочного теста известно, что 4 пода справляются с пиковой нагрузкой

Это значит, что в теории если говорить именно про минимальные ресурсы, то нам в ноде хватит и 4 под 

>На первые запросы приложению требуется значительно больше ресурсов CPU, в дальнейшем потребление ровное в районе 0.1 CPU. По памяти всегда “ровно” в районе 128M memory

Создадим HorizontalPodAutoscaler и выделим ресурсы,
так как потребление памяти = 128м, то столько и отправим, а по процу нагрузка плавает, поэтому тут можно поставить 0.1, а лимит выставить например "0.9"

>Приложение имеет дневной цикл по нагрузке – ночью запросов на порядки меньше, пик – днём

В теории можно настроить автомасштабирование на основе сервера метрик + hpa, но если нужно жестко регулировать ресурсы и говорить про минимальные ресурсы, то наверное надо сделать cronjob, где четко укажем когда сколько реплик создать

>Хотим максимально отказоустойчивый deployment

Для этого есть podAntiAffinity с разнесением по трем зонам доступности, hpa и балансировщик, но опять же тут тонкая грань, между отказоустойчивастью и минимальными ресурсами) 

>Хотим минимального потребления ресурсов от этого deployment’а

Опять же к верхнему вопросу отсылка, можно не делать масшабирование через hpa + сервер метрик, разнести минамальное количество под по нодам, и сделать cronjob для жесткого регулирования ресурсов, но жертвуя при этом отказо и катастрофаустойчивостью.
