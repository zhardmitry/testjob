## Тестовое задание Mindbox 



>У нас мультизональный кластер (три зоны), в котором пять нод	значит наше веб приложение разнесено по трем разным цодам, что повышает отказоустойчивость, тк вероятгость того что упадут все три суперминимальна (хотя и не равна нулю)

Это значит наше веб приложение разнесено по трем разным цодам, что повышает отказоустойчивость, тк вероятгость того что упадут все три  суперминимальна


>Приложение требует около 5-10 секунд для инициализации
  
  *initialDelaySeconds сообщает kubelet'у, что он должен ждать 5 секунд перед проведением первой пробы. Для проведения пробы kubelet отправляет запрос HTTP GET на сервер, который запущен в контейнере и слушает порт 80. Если обработчик пути /healthz на сервере возвращает код успеха, kubelet рассматривает контейнер как живой и здоровый. Если обработчик возвращает код ошибки, kubelet убивает и перезапускает контейнер.*


>По результатам нагрузочного теста известно, что 4 пода справляются с пиковой нагрузкой

Чтобы 5 нода не грустила, можно в теории в lb-service.yaml добавить балансировщик нагрузки, это должно уравновесить чашу нагрузки на все поды.

>На первые запросы приложению требуется значительно больше ресурсов CPU, в дальнейшем потребление ровное в районе 0.1 CPU. По памяти всегда “ровно” в районе 128M memory

создадим HorizontalPodAutoscaler и выделим ресурсы,
так как потребление памяти = 128м, то столько и отправим, а по процу нагрузка плавает, поэтому тут можно поставить 0.1, а лимит выставить например "1"

>Приложение имеет дневной цикл по нагрузке – ночью запросов на порядки меньше, пик – днём
В теории можно настроить автомасштабирование на основе сервера метрик + hpa, но если нужно жестко регултровать ресурсы, наверное надо сделать cronjob, где четко укажем когда сколько реплик создать

>Хотим максимально отказоустойчивый deployment

Для этого есть podAntiAffinity с разнесением по трем зонам доступности

>Хотим минимального потребления ресурсов от этого deployment’а

Этим занимались выше: горизонтальное масштабирование, балансировщик и кронджоба. 
